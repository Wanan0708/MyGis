# 瓦片下载分析

## 当前下载配置
- **地理范围**: 中国区域（纬度18°N-54°N，经度73°E-135°E）
- **缩放级别**: 3-8级（共6个层级）
- **瓦片大小**: 256x256像素

## 瓦片数量计算

### 每个缩放级别的瓦片数量
- **缩放级别3**: 2^3 = 8x8 = 64个瓦片（全球）
- **缩放级别4**: 2^4 = 16x16 = 256个瓦片（全球）
- **缩放级别5**: 2^5 = 32x32 = 1024个瓦片（全球）
- **缩放级别6**: 2^6 = 64x64 = 4096个瓦片（全球）
- **缩放级别7**: 2^7 = 128x128 = 16384个瓦片（全球）
- **缩放级别8**: 2^8 = 256x256 = 65536个瓦片（全球）

### 中国区域瓦片数量估算
中国区域约占全球面积的约6.4%，所以每个级别的瓦片数量约为：

- **缩放级别3**: 64 × 0.064 ≈ 4个瓦片
- **缩放级别4**: 256 × 0.064 ≈ 16个瓦片
- **缩放级别5**: 1024 × 0.064 ≈ 66个瓦片
- **缩放级别6**: 4096 × 0.064 ≈ 262个瓦片
- **缩放级别7**: 16384 × 0.064 ≈ 1049个瓦片
- **缩放级别8**: 65536 × 0.064 ≈ 4194个瓦片

**总计**: 约5589个瓦片

## 缩放显示问题分析

### 问题原因
1. **瓦片清理过于激进**: 缩放时清理了所有瓦片，包括当前层级的瓦片
2. **瓦片加载逻辑**: 没有优先加载本地已存在的瓦片
3. **场景管理**: 缩放时场景矩形设置可能不正确

### 解决方案
1. **改进瓦片清理逻辑**: 只清理不需要的瓦片，保留当前层级的瓦片
2. **优化瓦片加载**: 优先加载本地瓦片，减少网络请求
3. **改进场景管理**: 正确设置场景矩形和瓦片位置

